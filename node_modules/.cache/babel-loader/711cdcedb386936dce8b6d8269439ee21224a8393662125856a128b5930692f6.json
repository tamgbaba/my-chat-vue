{"ast":null,"code":"import HelloWorld from './components/HelloWorld.vue';\nimport { Base64 } from 'js-base64';\nexport default {\n  name: 'App',\n  components: {\n    HelloWorld\n  },\n  data() {\n    return {\n      data4: ''\n    };\n  },\n  mounted() {\n    var a = this.imageUrlToBase64;\n    console.log(a);\n  },\n  methods: {\n    //异步执行\n    imageUrlToBase64() {\n      //一定要设置为let，不然图片不显示\n      let image = new Image();\n      //解决跨域问题\n      image.setAttribute('crossOrigin', 'anonymous');\n      let imageUrl = \"http://img1.imgtn.bdimg.com/it/u=4012470373,3540768040&fm=26&gp=0.jpg\";\n      image.src = imageUrl;\n      let that = this;\n      //image.onload为异步加载\n      image.onload = () => {\n        var canvas = document.createElement(\"canvas\");\n        canvas.width = image.width;\n        canvas.height = image.height;\n        var context = canvas.getContext('2d');\n        context.drawImage(image, 0, 0, image.width, image.height);\n        var quality = 0.8;\n        //这里的dataurl就是base64类型\n        var dataURL = canvas.toDataURL(\"image/jpeg\", quality); //使用toDataUrl将图片转换成jpeg的格式,不要把图片压缩成png，因为压缩成png后base64的字符串可能比不转换前的长！\n        return dataURL.toString;\n      };\n    }\n  }\n};","map":{"version":3,"names":["HelloWorld","Base64","name","components","data","data4","mounted","a","imageUrlToBase64","console","log","methods","image","Image","setAttribute","imageUrl","src","that","onload","canvas","document","createElement","width","height","context","getContext","drawImage","quality","dataURL","toDataURL","toString"],"sources":["src/App.vue"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <img alt=\"Vue logo\" src=\"aHR0cHM6Ly9pbWcxLmJpb3l4LmNuL3Rlc3QvaW1nL2xvZ1VybC8vMS83NWRhMDUwZi0yOWY5LTQwYWQtOGY5MS0wMzIyOGM1Y2M5NDAuanBn\" />\n    <HelloWorld msg=\"Welcome to Your Vue.js App\" />\n  </div>\n</template>\n\n<script>\nimport HelloWorld from './components/HelloWorld.vue'\nimport { Base64 } from 'js-base64'\nexport default {\n  name: 'App',\n  components: {\n    HelloWorld,\n  },\n  data() {\n    return {\n      data4: '',\n    }\n  },\n  mounted() {\n      var a = this.imageUrlToBase64;\n      console.log(a)\n  },\n  methods: {\n       //异步执行\n      imageUrlToBase64() {\n            //一定要设置为let，不然图片不显示\n            let image = new Image();\n            //解决跨域问题\n            image.setAttribute('crossOrigin', 'anonymous');\n            let imageUrl = \"http://img1.imgtn.bdimg.com/it/u=4012470373,3540768040&fm=26&gp=0.jpg\";\n            image.src = imageUrl\n            let that = this;\n            //image.onload为异步加载\n            image.onload = () => {\n                var canvas = document.createElement(\"canvas\");\n                canvas.width = image.width;\n                canvas.height = image.height;\n                var context = canvas.getContext('2d');\n                context.drawImage(image, 0, 0, image.width, image.height);\n                var quality = 0.8;\n                //这里的dataurl就是base64类型\n                var dataURL = canvas.toDataURL(\"image/jpeg\", quality);//使用toDataUrl将图片转换成jpeg的格式,不要把图片压缩成png，因为压缩成png后base64的字符串可能比不转换前的长！\n                return dataURL.toString;\n            }\n        }\n  }\n}\n</script>\n\n<style lang=\"less\"></style>\n"],"mappings":"AAQA,OAAAA,UAAA;AACA,SAAAC,MAAA;AACA;EACAC,IAAA;EACAC,UAAA;IACAH;EACA;EACAI,KAAA;IACA;MACAC,KAAA;IACA;EACA;EACAC,QAAA;IACA,IAAAC,CAAA,QAAAC,gBAAA;IACAC,OAAA,CAAAC,GAAA,CAAAH,CAAA;EACA;EACAI,OAAA;IACA;IACAH,iBAAA;MACA;MACA,IAAAI,KAAA,OAAAC,KAAA;MACA;MACAD,KAAA,CAAAE,YAAA;MACA,IAAAC,QAAA;MACAH,KAAA,CAAAI,GAAA,GAAAD,QAAA;MACA,IAAAE,IAAA;MACA;MACAL,KAAA,CAAAM,MAAA;QACA,IAAAC,MAAA,GAAAC,QAAA,CAAAC,aAAA;QACAF,MAAA,CAAAG,KAAA,GAAAV,KAAA,CAAAU,KAAA;QACAH,MAAA,CAAAI,MAAA,GAAAX,KAAA,CAAAW,MAAA;QACA,IAAAC,OAAA,GAAAL,MAAA,CAAAM,UAAA;QACAD,OAAA,CAAAE,SAAA,CAAAd,KAAA,QAAAA,KAAA,CAAAU,KAAA,EAAAV,KAAA,CAAAW,MAAA;QACA,IAAAI,OAAA;QACA;QACA,IAAAC,OAAA,GAAAT,MAAA,CAAAU,SAAA,eAAAF,OAAA;QACA,OAAAC,OAAA,CAAAE,QAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}